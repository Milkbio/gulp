const { series, src, dest } = require('gulp');
const uglify = require('gulp-uglify');
const rename = require('gulp-rename');
const del = require('delete');

function clean(cb) {
	return del(['output'], {force: true}, cb);
}

function build() {
	return src('src/*.js')
			.pipe(src('vendor/*.js'))
			.pipe(dest('output/'))
			.pipe(uglify())
			.pipe(rename({ extname: '.min.js' }))
			.pipe(dest('output/'));
};

exports.default = series(clean, build);